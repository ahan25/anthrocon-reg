<?php
/**
* This unit test tests out the main reg class.
*/
class RegUnitTest extends DrupalTestCase {

	/**
	* Implementation of get_info() for information
	*/
	function get_info() {
		return array(
			"name" => t("reg class"),
			"desc" => t("Test out the reg class"),
			"group" => t("Registration System"),
			);
	}


	/**
	* Make sure that SSL is disabled.
	*/
	function TestNoSSL() {

		$output = variable_get($this->reg->get_constant(
			"form_admin_no_ssl_redirect"), "");
		$this->assertEqual(1, $output, t("SSL redirection is NOT disabled.  "
			. "Check the settings page."));

	} // End of testNoSSL()


	function testGetBadgeNum() {

		$output = $this->reg->get_badge_num();
		$this->assertNotNull($output);
		$expected = $output + 1;

		$output = $this->reg->get_badge_num();
		$this->assertNotNull($output);
		$this->assertEqual($expected, $output);

	} // End of testGetBadgeNum()


	function testIsBadgeNumValid() {

		$output = $this->reg->is_badge_num_valid("");
		$this->assertNotNull($output);

		$output = $this->reg->is_badge_num_valid(-1);
		$this->assertEqual(false, $output);

		$output = $this->reg->is_badge_num_valid(0);
		$this->assertEqual(true, $output);

		$output = $this->reg->is_badge_num_valid(1);
		$this->assertEqual(true, $output);

		$output = $this->reg->is_badge_num_valid("Foobar");
		$this->assertEqual(false, $output);

	} // End of testIsBadgeNumValid()


	function setUp() {
		$this->factory = new reg_factory();
		$this->reg = $this->factory->get_object("reg");
		$this->reg_member = $this->factory->get_object("member");
	}

	function tearDown() {
	}


} // End of RegUnitTest class


