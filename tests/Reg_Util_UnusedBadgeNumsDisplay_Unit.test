<?php
/**
* This unit test tests out the main reg class.
*/
class Reg_Util_UnusedBadgeNumsDisplay_Test extends DrupalTestCase {

	/**
	* Implementation of getInfo() for information
	*/
	function getInfo() {
		return array(
			"name" => t("Reg_Util_UnusedBadgeNumsDisplay Unit Test"),
			//"desc" => t("Test out the reg class"),
			"group" => t("reg-unit-tests"),
			);
	}


	function testGo() {

		$output = $this->util->go();
		$this->assertNotNull($output);

		//
		// Test to make sure our session is reset
		//
		$_SESSION["reg"]["util"]["unused_badge_nums"] = true;
		$this->assertNotNull($_SESSION["reg"]["util"]["unused_badge_nums"]);

		$output = $this->util->go();
		$this->assertNotNull($output);
		$regexp = t("following badge numbers");
		$this->assertTrue(ereg($regexp, $output));
		$this->assertNull($_SESSION["reg"]["util"]["unused_badge_nums"]);

		$output = $this->util->go();
		$this->assertNotNull($output);
		$this->assertFalse(ereg($regexp, $output));
		$this->assertNull($_SESSION["reg"]["util"]["unused_badge_nums"]);

	} // End of testGo()


	function testGetForm() {

		$output = $this->util->getForm();
		$this->assertNotNull($output);

	} // End of testGetForm()


	function testGetFormSubmit() {
		//
		// Just kidding!  I can't test the submit funciton here since it 
		// does redirection.
		//
	} // End of testGetFormSubmit()


	function testGetResults() {
		$output = $this->util->getResults();
		$this->assertNotNull($output);
	}


	function setUp() {
		$factory = new reg_factory();
		$this->reg = $factory->get_object("reg");
		$this->util = $factory->get_object("Util_UnusedBadgeNumsDisplay");
	}


	function tearDown() {
	}


} // End of RegUnitTest class


